     1                                  bits 32 ; assembling for the 32 bits architecture
     2                                  
     3                                  ; declare the EntryPoint (a label defining the very first instruction of the program)
     4                                  global start        
     5                                  
     6                                  ; declare external functions needed by our program
     7                                  extern exit,fopen,fclose,fread,scanf,printf               ; tell nasm that exit exists even if we won't be defining it
     8                                  import exit msvcrt.dll    ; exit is a function that ends the calling process. It is defined in msvcrt.dll
     9                                  import fopen msvcrt.dll 
    10                                  import fclose msvcrt.dll 
    11                                  import fread msvcrt.dll 
    12                                  import scanf msvcrt.dll
    13                                  import printf msvcrt.dll                          ; msvcrt.dll contains exit, printf and all the other important C-runtime specific functions
    14                                  
    15                                  ; our data is declared here (the variables needed by our program)
    16                                  segment data use32 class=data
    17                                      ; ...
    18                                      len equ 100
    19 00000000 <rept>                      s times (len+1) db
    19          ******************       warning: no operand for data declaration
    20 00000000 257300                      format db '%s',0
    21                                      
    22                                  ; our code starts here
    23                                  segment code use32 class=code
    24                                      start:
    25                                          ; ...
    26                                          ;Write a program that reads a string of maximum 100 bytes from the keyboard. Determine the number of digits in the string and write a procedure that prints this number in base 16 on the screen.
    27 00000000 68[00000000]                    push dword s 
    28 00000005 68[00000000]                    push dword format 
    29 0000000A FF15[00000000]                  call [scanf]
    30                                          
    31 00000010 BE[00000000]                    mov esi,s
    32 00000015 B300                            mov bl,0
    33                                          repeta:
    34 00000017 AC                                  lodsb
    35 00000018 3C00                                cmp al,0
    36 0000001A 7411                                je final
    37 0000001C 3C30                                cmp al,'0'
    38 0000001E 7302                                jae et
    39 00000020 EB09                                jmp sf
    40                                              et:
    41 00000022 3C39                                    cmp al,'9'
    42 00000024 7602                                    jbe este_cifra
    43 00000026 EB03                                    jmp sf 
    44                                              este_cifra:
    45 00000028 80C301                                  add bl,1
    46                                             sf: 
    47 0000002B EBEA                                jmp repeta
    48                                              
    49                                          final:
    50                                               
    51                                          
    52                                          
    53                                          ; exit(0)
    54 0000002D 6A00                            push    dword 0      ; push the parameter for exit onto the stack
    55 0000002F FF15[00000000]                  call    [exit]       ; call exit to terminate the program
